<script src="../../../Scripts/Base/jquery.mask.min.js"></script>
<div ng-controller="Event.Report" class="report">
    <strong class="count"><i class="icon-list"></i> Total de Inscritos: {{registrations.length}}</strong>
    <div class="buttons">
        <a href="" class="button" title="Atualizar Lista" ng-click="Reload()"><i class="icon-sync"></i></a>
        <a href="" class="button" title="Remover Selecionados" ng-click="ConfirmDelete()"><i class="icon-delete"></i></a>
        <a href="" class="button" title="Adicionar" ng-click="openForm(null)"><i class="icon-add"></i></a>
        <a href="" class="button" title="Imprimir Adesivos" ng-click="PrintAll()"><i class="icon-print"></i></a>
        <a href="" class="button" title="Baixar Excel" ng-click="Export()"><i class="icon-download-alt"></i></a>
    </div>
    <umb-load-indicator ng-if="loading">
    </umb-load-indicator>
    <div class="data">
        <table>
            <tr>
                <th>
                    <input type="checkbox"
                           ng-model="selectAll"
                           ng-click="CheckAll()"
                           title="Selecionar Todos">
                </th>
                <th title="Número da Inscrição">#</th>
                <th>Detalhes do Inscrito</th>
                <th>Detalhes Inscrição</th>
                <th>Observações</th>
                <th>Ações</th>
            </tr>
            <tr ng-repeat="registration in registrations">
                <td><input type="checkbox" value="{{registartion.Id}}" ng-model="registration.selected" /></td>
                <td>{{registration.RegistrationNumber}}</td>
                <td class="user-details">
                    <strong>Nome: </strong>{{registration.Fullname}}<br />
                    <strong>CPF: </strong>{{registration.Document}}
                    <br />
                    <details>
                        <summary>Dados</summary>
                        <strong>Endereço: </strong><br />
                        {{registration.Address}} {{registration.Number}} {{registration.Address2}}
                        <br />
                        {{registration.City}} - {{registration.State}}, {{registration.Postal}}
                        <br />
                        <strong>Email: </strong>{{registration.Email1}} <br />
                        <span ng-if="registration.Email2"><strong>Alternativo: </strong>{{registration.Email2}} </span> <br />
                        <strong>Fone: </strong>{{registration.Phone1}} <br />
                        <span ng-if="registration.Phone2"><strong>Celular: </strong>{{registration.Phone2}} </span>
                    </details>
                </td>
                <td>
                    <strong>Em: </strong> {{registration.CreatedOn}} <br />
                    <strong>Total Pago: </strong>R$ {{registration.Total}},00 <i class="paid icon-check" ng-if="registration.Paid" title="Pagamento Confirmado"></i><br />
                    <details>
                        <summary>Detalhes:</summary>
                        <strong>Inclusos na inscrição: </strong>
                        <ul>
                            <li ng-repeat="sub in registration.AddOnListNames">{{sub}}</li>
                        </ul>
                        <br />
                        <span><strong>Referencia: </strong>{{registration.RefCode}}</span>
                        <br />
                        <span><strong>Sessão: </strong>{{registration.Session}}</span>
                        <br />
                        <span ng-if="registration.PaymentConfirmation"><strong>Confirmação: </strong>{{registration.PaymentConfirmation}}</span>
                        <br/>
                        <span ng-if="registration.IpAddress"><strong>IP: </strong>{{registration.IpAddress}}</span>

                    </details>

                </td>
                <td>{{registration.RegistrationDescription}}</td>
                <td>
                    <a href="" title="Editar" ng-click="openForm($index)"><i class="icon-edit"></i></a>
                    <a href="" title="Remover" ng-click="ConfirmDeleteOne(registration.Id)"><i class="icon-delete"></i></a>
                </td>
            </tr>
        </table>
    </div>
    <div class="backdrop" ng-if="selection"></div>
    <section class="form-wrapper" ng-if="selection">
        <h4>Nova inscrição Manual</h4>
        <h5 class="status"></h5>
        <form id="form">
            <ul>
                <li>
                    <input type="text" placeholder="Nome Completo*" data-ctrl="name" ng-model="selection.Fullname" required />
                </li>
                <li class="split split-half-half">
                    <input type="text" placeholder="Fone Residencial com DDD*" data-ctrl="phone1" ng-model="selection.Phone1" required />
                    <input type="text" placeholder="Celular com DDD" data-ctrl="phone2" ng-model="selection.Phone2" />
                </li>
                <li class="split split-thirds">
                    <input type="text" placeholder="E-mail Principal*" data-ctrl="email1" ng-model="selection.Email1" required />
                    <input type="text" placeholder="E-mail" data-ctrl="email2" ng-model="selection.Email2" />
                    <input type="text" placeholder="CPF*" data-ctrl="document" ng-model="selection.Document" required />
                </li>
                <li class="split split-thirds">
                    <input type="text" placeholder="Código Postal*" data-ctrl="postal" ng-blur="GetPostal()" ng-model="selection.Postal" required />
                    <input type="text" placeholder="Cidade*" data-ctrl="city" ng-model="selection.City" required />
                    <input type="text" placeholder="Estado*" data-ctrl="state" ng-model="selection.State" required />
                </li>
                <li class="split split-two-thirds">
                    <input type="text" placeholder="Logradouro*" ng-model="selection.Address" data-ctrl="address" required />
                    <input type="text" placeholder="Número*" ng-model="selection.Number" data-ctrl="number" required />
                </li>
                <li class="split split-half-half">
                    <input type="text" placeholder="Complemento" ng-model="selection.Address2" data-ctrl="address2" />
                    <input type="text" placeholder="Bairro" ng-model="selection.Neighborhood" data-ctrl="hood" />
                </li>
                <li>
                    <h6>* Campos obrigatórios</h6>
                </li>
                <li class="split split-thirds">
                    <div>
                        <h5>Pago?</h5>
                        <input type="checkbox" ng-model="selection.Paid" />
                    </div>
                    &nbsp;
                    <div>
                        <h5>Total Pago R$</h5>
                        <input type="text" ng-model="selection.Total" data-ctrl="total" />
                    </div>
                    &nbsp;
                    <div>
                        <h5>Anotações</h5>
                        <input type="text" ng-model="selection.RegistrationDescription" placeholder="observações" />
                    </div>

                </li>
                <li>
                    <h5>Inclusos</h5>
                    <ul>
                        <li ng-repeat="addon in AllAddOns">
                            <input type="checkbox" id="Addon{{addon.Name}}" ng-checked="AllAddOns[$index].Checked" ng-click="CalSubTotal($index)" /> <label for="Addon{{addon.Name}}" title="{{addon.Description}}">{{addon.Name}} - {{addon.Currency}}{{addon.Price}} <!--({{addon.Description}})--></label>
                        </li>
                    </ul>
                </li>
                <li class="button-line">
                    <button type="button" class="button ok" ng-click="Save()"><i class="fa fa-edit"></i> Enviar</button>
                    <button type="button" class="button cancel" ng-click="CancelForm()">Cancelar</button>
                </li>
            </ul>
        </form>
    </section>
    <div id="dialog" ng-model="dialog" ng-if="dialog">
        <h5>{{dialog.Title}}</h5>
        <h6>{{dialog.Info}}</h6>
        <a href="" class="button ok" ng-click="dialog.Confirm()">{{dialog.Ok}}</a> <a href="" ng-click="dialog.Confirm()" class="button cancel" ng-if="dialog.Cancel">{{dialog.Cancel}}</a>
    </div>
</div>